<?xml version="1.0" ?>
<robot name="robot_lab2" xmlns:xacro="http://www.ros.org/wiki/xacro">
<xacro:property name="params" value="${load_yaml('model.yaml')}"/>
<xacro:property name="first_link_length" value="${params['d']}" />
<xacro:property name="first_link_z" value="${first_link_length/2 + 0.1}" />
<xacro:property name="joint_upper_limit" value="${first_link_length - 2*0.1}" />

    <link name="base_link">
        <visual>
        <origin xyz="0 0 0.05" />
        <geometry>
          <box size="1 1 0.1"/>
        </geometry>
        </visual>
    </link>
  
    <link name="first_link">
        <visual>
        <origin xyz="0 0 ${first_link_z}" />
        <geometry>
          <cylinder radius="0.1" length="${first_link_length}"/>
        </geometry>
        </visual>
    </link>
  
  <link name="translator">
        <visual>
        <origin xyz="0 0 0.5" rpy="0 0 0"/>
        <geometry>
          <cylinder radius="0" length="0"/>
        </geometry>
        </visual>
    </link>
  
  <link name="second_link">
        <visual>
        <origin xyz="${params['a']/2} 0 0" rpy="0 1.57 0"/>
        <geometry>
          <cylinder radius="0.1" length="${params['a']}"/>
        </geometry>
        </visual>
    </link>
  
  <link name="tool">
        <visual>
        <origin xyz="0.25 0 0" rpy="0 0 0"/>
        <geometry>
          <box size="0.5 .1 .1"/>
        </geometry>
        </visual>
    </link>
  
        <joint name="base_to_first_link" type="fixed">
          <parent link="base_link"/>
          <child link="first_link"/>
      </joint>
  
      <joint name="first_to_translator" type="prismatic">
          <parent link="first_link"/>
          <child link="translator"/>
          <origin xyz="0 0 0.2" rpy="0 0 0"/>
          <axis xyz="0 0 1"/>
          <limit upper="${joint_upper_limit}" lower="0" effort="20" velocity="0"/>
      </joint>
  
  <joint name="translator_to_second" type="continuous">
          <parent link="translator"/>
          <child link="second_link"/>
          <origin rpy="0 0 ${params['th1']}"/>
          <axis xyz="0 0 1"/>

          </joint>
  <joint name="second_to_tool" type="revolute">
          <parent link="second_link"/>
          <child link="tool"/>
          <origin xyz="${params['a']} 0 0" rpy="0 0 ${params['th2']}"/>
          <limit upper="0.78" lower="-0.78" effort="20" velocity="0"/>
          <axis xyz="0 0 1"/>
      </joint>
  </robot>